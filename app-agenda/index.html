<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diafer</title>
    <meta name="theme-color" content="#64b5f6">
    <meta name="description" content="Agenda e Notas - Diafer">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192x192.png">
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icon-512x512.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)),
                        url('https://images.unsplash.com/photo-1557683316-973673baf926?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2029&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            min-height: 100vh;
            color: #fff;
            display: flex;
        }

        .sidebar {
            width: 250px;
            background-color: rgba(20, 20, 20, 0.95);
            height: 100vh;
            padding: 20px;
            position: fixed;
            left: 0;
            top: 0;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 40px;
            padding: 15px;
            border-radius: 10px;
            background: linear-gradient(45deg, #64b5f6, #42a5f5);
            text-align: center;
        }

        .logo-icon {
            font-size: 28px;
            margin-right: 15px;
        }

        .logo-text {
            font-size: 28px;
            font-weight: bold;
            color: white;
            text-transform: uppercase;
            letter-spacing: 2px;
            flex: 1;
            text-align: center;
        }

        .menu-item {
            padding: 15px 20px;
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            color: #ccc;
        }

        .menu-item:hover {
            background-color: rgba(100, 181, 246, 0.1);
            color: #64b5f6;
        }

        .menu-item.active {
            background-color: #64b5f6;
            color: white;
        }

        .menu-item i {
            margin-right: 10px;
            font-size: 20px;
        }

        .main-content {
            margin-left: 250px;
            flex: 1;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }

        .container {
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
            background-color: rgba(30, 30, 30, 0.95);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #64b5f6;
            font-weight: 500;
        }

        input[type="text"], input[type="datetime-local"] {
            width: 100%;
            height: 40px;
            min-height: 40px;
            max-height: 40px;
            padding: 8px 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            font-size: 14px;
            background-color: rgba(45, 45, 45, 0.9);
            color: #fff;
            transition: all 0.3s ease;
        }

        input[type="datetime-local"] {
            color-scheme: dark;
        }

        input[type="text"]:focus, input[type="datetime-local"]:focus {
            outline: none;
            border-color: #64b5f6;
            box-shadow: 0 0 10px rgba(100, 181, 246, 0.3);
        }

        textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            font-size: 14px;
            background-color: rgba(45, 45, 45, 0.9);
            color: #fff;
            transition: all 0.3s ease;
            resize: none;
            min-height: 100px;
            max-height: 200px;
            overflow-y: auto;
        }

        textarea::-webkit-scrollbar {
            width: 4px;
        }

        textarea::-webkit-scrollbar-track {
            background: rgba(45, 45, 45, 0.9);
            border-radius: 2px;
        }

        textarea::-webkit-scrollbar-thumb {
            background: #64b5f6;
            border-radius: 2px;
        }

        textarea::-webkit-scrollbar-thumb:hover {
            background: #42a5f5;
        }

        button {
            background-color: #64b5f6;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        button:hover {
            background-color: #42a5f5;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(100, 181, 246, 0.3);
        }

        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
            gap: 10px;
        }

        .tab {
            padding: 12px 25px;
            cursor: pointer;
            font-weight: bold;
            border-radius: 8px 8px 0 0;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .tab.pendentes {
            background-color: #64b5f6;
            color: white;
        }

        .tab.passados {
            background-color: #ef5350;
            color: white;
        }

        .tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .compromissos {
            margin-top: 20px;
        }

        .compromisso {
            background-color: rgba(45, 45, 45, 0.9);
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 8px;
            border-left: 4px solid #64b5f6;
            transition: all 0.3s ease;
        }

        .compromisso:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .compromisso.passado {
            border-left-color: #ef5350;
        }

        .compromisso h3 {
            color: #64b5f6;
            margin-bottom: 8px;
            font-size: 1.2em;
        }

        .compromisso.passado h3 {
            color: #ef5350;
        }

        .compromisso p {
            color: #ccc;
            margin-bottom: 8px;
            line-height: 1.5;
            max-height: 100px;
            overflow-y: auto;
            overflow-x: hidden;
            padding-right: 5px;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .compromisso p::-webkit-scrollbar {
            width: 4px;
        }

        .compromisso p::-webkit-scrollbar-track {
            background: rgba(45, 45, 45, 0.9);
            border-radius: 2px;
        }

        .compromisso p::-webkit-scrollbar-thumb {
            background: #64b5f6;
            border-radius: 2px;
        }

        .compromisso p::-webkit-scrollbar-thumb:hover {
            background: #42a5f5;
        }

        .acoes {
            display: flex;
            gap: 10px;
        }

        .btn-editar {
            background-color: #ffa726;
        }

        .btn-excluir {
            background-color: #ef5350;
        }

        .btn-editar:hover {
            background-color: #fb8c00;
        }

        .btn-excluir:hover {
            background-color: #e53935;
        }

        .status {
            text-align: center;
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            background-color: rgba(100, 181, 246, 0.1);
            color: #64b5f6;
            border: 1px solid rgba(100, 181, 246, 0.3);
            transition: all 0.3s ease;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Estilização do input datetime-local */
        input[type="datetime-local"]::-webkit-calendar-picker-indicator {
            filter: invert(1);
        }

        /* Estilos para a seção de notas */
        .notas-container {
            display: none;
        }

        .notas-container.active {
            display: block;
        }

        .notas-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .nota-card {
            background-color: rgba(45, 45, 45, 0.9);
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #64b5f6;
            cursor: pointer;
            transition: all 0.3s ease;
            height: 200px;
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .nota-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .nota-card h3 {
            color: #64b5f6;
            margin-bottom: 8px;
            font-size: 1.2em;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            word-break: break-word;
        }

        .nota-card .preview {
            color: #ccc;
            margin-bottom: 8px;
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 6;
            -webkit-box-orient: vertical;
            overflow: hidden;
            word-break: break-word;
            flex-grow: 1;
            overflow-y: auto;
            padding-right: 5px;
        }

        .nota-card .preview::-webkit-scrollbar {
            width: 4px;
        }

        .nota-card .preview::-webkit-scrollbar-track {
            background: rgba(45, 45, 45, 0.9);
            border-radius: 2px;
        }

        .nota-card .preview::-webkit-scrollbar-thumb {
            background: #64b5f6;
            border-radius: 2px;
        }

        .nota-card .preview::-webkit-scrollbar-thumb:hover {
            background: #42a5f5;
        }

        .nota-card .data {
            color: #888;
            font-size: 0.9em;
            position: absolute;
            bottom: 10px;
            left: 20px;
            right: 20px;
            background-color: rgba(45, 45, 45, 0.9);
            padding: 5px 0;
        }

        .nota-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .nota-modal.active {
            display: flex;
        }

        .nota-modal-content {
            background-color: rgba(30, 30, 30, 0.95);
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
        }

        .nota-modal-content h3 {
            color: #64b5f6;
            margin-bottom: 15px;
            font-size: 1.5em;
            word-break: break-word;
        }

        .nota-modal-content p {
            color: #ccc;
            line-height: 1.6;
            margin-bottom: 20px;
            white-space: pre-wrap;
            word-break: break-word;
            flex-grow: 1;
        }

        .nota-modal-content .data {
            color: #888;
            font-size: 0.9em;
            margin-bottom: 20px;
        }

        .nota-modal-content .acoes {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .btn-fechar {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: #888;
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
            transition: all 0.3s ease;
        }

        .btn-fechar:hover {
            color: #64b5f6;
        }

        /* Estilização da barra de rolagem */
        .nota-modal-content::-webkit-scrollbar {
            width: 8px;
        }

        .nota-modal-content::-webkit-scrollbar-track {
            background: rgba(45, 45, 45, 0.9);
            border-radius: 4px;
        }

        .nota-modal-content::-webkit-scrollbar-thumb {
            background: #64b5f6;
            border-radius: 4px;
        }

        .nota-modal-content::-webkit-scrollbar-thumb:hover {
            background: #42a5f5;
        }

        /* Estilos para a agenda */
        .meses-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .mes-card {
            background-color: rgba(45, 45, 45, 0.9);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #64b5f6;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            min-height: 120px;
        }

        .mes-card.passado {
            background-color: rgba(255, 193, 7, 0.2);
            border-left-color: #ffc107;
        }

        .mes-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .mes-card h3 {
            color: #64b5f6;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .mes-card.passado h3 {
            color: #ffc107;
        }

        .mes-card .compromissos-count {
            color: #ccc;
            font-size: 0.9em;
        }

        .mes-card .indicador {
            position: absolute;
            top: 10px;
            right: 10px;
            color: #64b5f6;
            font-size: 28px;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s ease;
            text-shadow: 0 0 10px rgba(100, 181, 246, 0.5);
        }

        .mes-card.tem-compromissos .indicador {
            opacity: 1;
        }

        .mes-card.tem-compromissos {
            background-color: rgba(76, 175, 80, 0.2);
            border-left-color: #4caf50;
        }

        .mes-card.tem-compromissos h3 {
            color: #4caf50;
        }

        .mes-card.tem-compromissos .indicador {
            color: #4caf50;
            text-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
        }

        .dias-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .dia-card {
            background-color: rgba(45, 45, 45, 0.9);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #64b5f6;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            text-align: center;
        }

        .dia-card.passado {
            background-color: rgba(255, 193, 7, 0.2);
            border-left-color: #ffc107;
        }

        .dia-card.tem-compromissos {
            background-color: rgba(76, 175, 80, 0.2);
            border-left-color: #4caf50;
        }

        .dia-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .dia-card h4 {
            color: #64b5f6;
            margin-bottom: 5px;
            font-size: 1.1em;
        }

        .dia-card.passado h4 {
            color: #ffc107;
        }

        .dia-card.tem-compromissos h4 {
            color: #4caf50;
        }

        .dia-card .compromissos-count {
            color: #ccc;
            font-size: 0.8em;
        }

        .dia-card .indicador {
            position: absolute;
            top: 5px;
            right: 5px;
            color: #4caf50;
            font-size: 24px;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s ease;
            text-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
        }

        .dia-card.tem-compromissos .indicador {
            opacity: 1;
        }

        .compromissos-dia-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .compromissos-dia-modal.active {
            display: flex;
        }

        .compromissos-dia-content {
            background-color: rgba(30, 30, 30, 0.95);
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .compromissos-dia-content h3 {
            color: #64b5f6;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .compromissos-dia-content .compromisso {
            margin-bottom: 15px;
        }

        .voltar-btn {
            background-color: #64b5f6;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 15px;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .voltar-btn:hover {
            background-color: #42a5f5;
        }

        /* Novo estilo para o seletor de ano */
        .ano-selector {
            margin-bottom: 20px;
            text-align: center;
        }

        .ano-selector select {
            background-color: rgba(45, 45, 45, 0.9);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
        }

        /* Estilo para os dias da semana */
        .dias-semana {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            margin-bottom: 15px;
            text-align: center;
        }

        .dia-semana {
            color: #64b5f6;
            font-weight: bold;
            padding: 5px;
            background-color: rgba(45, 45, 45, 0.9);
            border-radius: 5px;
        }

        .dia-card.vazio {
            background-color: transparent;
            border: none;
            cursor: default;
        }

        .dia-card.vazio:hover {
            transform: none;
            box-shadow: none;
        }

        .dia-card {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            min-height: 100px;
        }

        .dias-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .meses-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .mes-card {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            min-height: 150px;
        }

        .cadastro-container {
            display: none;
        }

        .cadastro-container.active {
            display: block;
        }

        .clientes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .cliente-card {
            background-color: rgba(45, 45, 45, 0.9);
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #64b5f6;
            transition: all 0.3s ease;
        }

        .cliente-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .cliente-card h3 {
            color: #64b5f6;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .cliente-card p {
            color: #ccc;
            margin-bottom: 10px;
        }

        .cliente-card .sessoes-preview {
            color: #888;
            font-size: 0.9em;
            margin-bottom: 15px;
            max-height: 100px;
            overflow-y: auto;
            padding-right: 5px;
        }

        .cliente-card .sessoes-preview::-webkit-scrollbar {
            width: 4px;
        }

        .cliente-card .sessoes-preview::-webkit-scrollbar-track {
            background: rgba(45, 45, 45, 0.9);
            border-radius: 2px;
        }

        .cliente-card .sessoes-preview::-webkit-scrollbar-thumb {
            background: #64b5f6;
            border-radius: 2px;
        }

        .cliente-card .sessoes-preview::-webkit-scrollbar-thumb:hover {
            background: #42a5f5;
        }

        .search-container {
            margin-bottom: 20px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 12px 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            background-color: rgba(45, 45, 45, 0.9);
            color: #fff;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #64b5f6;
            box-shadow: 0 0 10px rgba(100, 181, 246, 0.3);
        }

        .search-input::placeholder {
            color: #888;
        }

        .resultados-busca {
            margin: 20px 0;
            padding: 20px;
            background-color: rgba(45, 45, 45, 0.9);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .resultados-busca h3 {
            color: #64b5f6;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .compromissos-busca {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
        }

        .compromisso-busca-card {
            background-color: rgba(45, 45, 45, 0.9);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #64b5f6;
            transition: all 0.3s ease;
        }

        .compromisso-busca-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .compromisso-busca-card h4 {
            color: #64b5f6;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .compromisso-busca-card p {
            color: #ccc;
            margin-bottom: 8px;
            font-size: 0.9em;
        }

        .compromisso-busca-card .data {
            color: #888;
            font-size: 0.8em;
            margin-bottom: 10px;
        }

        .compromisso-busca-card .acoes {
            display: flex;
            gap: 8px;
        }

        .configuracoes-container {
            display: none;
        }

        .configuracoes-container.active {
            display: block;
        }

        .configuracoes-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-radius: 8px;
            background-color: rgba(30, 30, 30, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .btn-limpar {
            background-color: #ef5350;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-limpar:hover {
            background-color: #e53935;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(239, 83, 80, 0.3);
        }

        .btn-limpar i {
            font-size: 16px;
        }

        .modal-confirmacao {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-confirmacao.active {
            display: flex;
        }

        .modal-content {
            background-color: rgba(30, 30, 30, 0.95);
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .modal-content h3 {
            color: #ef5350;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .modal-content p {
            color: #ccc;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .modal-botoes {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .btn-cancelar {
            background-color: #ccc;
            color: #333;
            border: none;
            padding: 10px 30px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .btn-cancelar:hover {
            background-color: #999;
        }

        .btn-confirmar {
            background-color: #ef5350;
            color: white;
            border: none;
            padding: 10px 30px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .btn-confirmar:hover {
            background-color: #e53935;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="sidebar">
        <div class="logo">
            <i class="fas fa-calendar-alt logo-icon"></i>
            <span class="logo-text">Diafer</span>
        </div>
        <div class="menu-item" onclick="mudarSeccao('cadastro')">
            <i class="fas fa-user-plus"></i>
            <span>Cadastro</span>
        </div>
        <div class="menu-item active" onclick="mudarSeccao('agenda')">
            <i class="fas fa-calendar-check"></i>
            <span>Agenda</span>
        </div>
        <div class="menu-item" onclick="mudarSeccao('notas')">
            <i class="fas fa-sticky-note"></i>
            <span>Notas</span>
        </div>
        <div class="menu-item" onclick="mudarSeccao('configuracoes')">
            <i class="fas fa-cog"></i>
            <span>Configurações</span>
        </div>
    </div>

    <div class="main-content">
        <div id="agenda-section" class="container">
            <div class="search-container">
                <input type="text" id="searchAgenda" placeholder="Buscar compromissos..." class="search-input">
            </div>
            <div id="resultados-busca" class="resultados-busca" style="display: none;">
                <h3>Resultados da Busca</h3>
                <div id="compromissos-busca" class="compromissos-busca">
                    <!-- Resultados da busca serão inseridos aqui -->
                </div>
            </div>
            <h2 style="color: white; margin-bottom: 20px; text-align: center;">Agenda</h2>
            <form id="formCompromisso">
                <div class="form-group">
                    <label for="titulo">Título:</label>
                    <input type="text" id="titulo" required>
                </div>
                
                <div class="form-group">
                    <label for="data">Data:</label>
                    <input type="datetime-local" id="data" required>
                </div>
                
                <div class="form-group">
                    <label for="descricao">Descrição:</label>
                    <textarea id="descricao" rows="3"></textarea>
                </div>
                
                <button type="submit">Adicionar Compromisso</button>
            </form>

            <div class="status" id="status"></div>

            <div class="ano-selector">
                <select id="anoSelecionado">
                    <option value="">Selecione o ano</option>
                    <option value="2025">2025</option>
                    <option value="2026">2026</option>
                    <option value="2027">2027</option>
                    <option value="2028">2028</option>
                    <option value="2029">2029</option>
                    <option value="2030">2030</option>
                    <option value="2031">2031</option>
                    <option value="2032">2032</option>
                    <option value="2033">2033</option>
                    <option value="2034">2034</option>
                    <option value="2035">2035</option>
                    <option value="2036">2036</option>
                    <option value="2037">2037</option>
                    <option value="2038">2038</option>
                    <option value="2039">2039</option>
                    <option value="2040">2040</option>
                    <option value="2041">2041</option>
                    <option value="2042">2042</option>
                    <option value="2043">2043</option>
                    <option value="2044">2044</option>
                    <option value="2045">2045</option>
                    <option value="2046">2046</option>
                    <option value="2047">2047</option>
                    <option value="2048">2048</option>
                    <option value="2049">2049</option>
                    <option value="2050">2050</option>
                    <option value="2051">2051</option>
                    <option value="2052">2052</option>
                    <option value="2053">2053</option>
                    <option value="2054">2054</option>
                    <option value="2055">2055</option>
                    <option value="2056">2056</option>
                    <option value="2057">2057</option>
                    <option value="2058">2058</option>
                    <option value="2059">2059</option>
                    <option value="2060">2060</option>
                    <option value="2061">2061</option>
                    <option value="2062">2062</option>
                    <option value="2063">2063</option>
                    <option value="2064">2064</option>
                    <option value="2065">2065</option>
                    <option value="2066">2066</option>
                    <option value="2067">2067</option>
                    <option value="2068">2068</option>
                    <option value="2069">2069</option>
                    <option value="2070">2070</option>
                </select>
            </div>

            <div id="meses-view" class="meses-grid" style="display: none;">
                <!-- Cards dos meses serão inseridos aqui -->
            </div>

            <div id="dias-view" style="display: none;">
                <h3 id="mes-atual-titulo" style="text-align: center; color: #64b5f6; margin-bottom: 20px; font-size: 1.5em;"></h3>
                <div class="dias-semana">
                    <div class="dia-semana">D</div>
                    <div class="dia-semana">S</div>
                    <div class="dia-semana">T</div>
                    <div class="dia-semana">Q</div>
                    <div class="dia-semana">Q</div>
                    <div class="dia-semana">S</div>
                    <div class="dia-semana">S</div>
                </div>
                <div id="dias-grid" class="dias-grid">
                    <!-- Cards dos dias serão inseridos aqui -->
                </div>
            </div>
        </div>

        <div id="notas-section" class="container notas-container">
            <div class="search-container">
                <input type="text" id="searchNotas" placeholder="Buscar notas..." class="search-input">
            </div>
            <h2 style="color: white; margin-bottom: 20px; text-align: center;">Notas</h2>
            <form id="formNota">
                <div class="form-group">
                    <label for="tituloNota">Título:</label>
                    <input type="text" id="tituloNota" required>
                </div>
                
                <div class="form-group">
                    <label for="conteudoNota">Conteúdo:</label>
                    <textarea id="conteudoNota" rows="5" required></textarea>
                </div>
                
                <button type="submit">Adicionar Nota</button>
            </form>

            <div class="notas-grid" id="listaNotas">
                <!-- As notas serão inseridas aqui -->
            </div>
        </div>

        <div id="cadastro-section" class="container cadastro-container">
            <div class="search-container">
                <input type="text" id="searchClientes" placeholder="Buscar clientes..." class="search-input">
            </div>
            <h2 style="color: white; margin-bottom: 20px; text-align: center;">Cadastro</h2>
            <form id="formCliente">
                <div class="form-group">
                    <label for="nomeCliente">Nome:</label>
                    <input type="text" id="nomeCliente" required>
                </div>
                
                <div class="form-group">
                    <label for="contatoCliente">Contato:</label>
                    <input type="text" id="contatoCliente" required>
                </div>
                
                <div class="form-group">
                    <label for="sessoesCliente">Sessões:</label>
                    <textarea id="sessoesCliente" rows="3" placeholder="Descreva as sessões realizadas"></textarea>
                </div>
                
                <button type="submit">Adicionar Cliente</button>
            </form>

            <div class="clientes-grid" id="listaClientes">
                <!-- Os clientes serão inseridos aqui -->
            </div>
        </div>

        <div id="configuracoes-section" class="container configuracoes-container">
            <h2 style="color: white; margin-bottom: 20px; text-align: center;">Configurações</h2>
            <div class="configuracoes-content">
                <button class="btn-limpar" onclick="confirmarLimparDados()">
                    <i class="fas fa-trash-alt"></i> Limpar Dados
                </button>
            </div>
        </div>

        <!-- Modal de confirmação para limpar dados -->
        <div class="modal-confirmacao" id="modalConfirmacao">
            <div class="modal-content">
                <h3>Confirmar Exclusão</h3>
                <p>Tem certeza que deseja limpar todos os dados? Esta ação não pode ser desfeita.</p>
                <div class="modal-botoes">
                    <button class="btn-cancelar" onclick="fecharModalConfirmacao()">Não</button>
                    <button class="btn-confirmar" onclick="limparDados()">Sim</button>
                </div>
            </div>
        </div>

        <!-- Modal para visualização da nota -->
        <div class="nota-modal" id="notaModal">
            <div class="nota-modal-content">
                <button class="btn-fechar" onclick="fecharModal()">&times;</button>
                <h3 id="modalTitulo"></h3>
                <p id="modalConteudo"></p>
                <p class="data" id="modalData"></p>
                <div class="acoes">
                    <button class="btn-excluir" onclick="excluirNotaAtual()">Excluir</button>
                </div>
            </div>
        </div>

        <!-- Modal para visualização dos compromissos do dia -->
        <div class="compromissos-dia-modal" id="compromissosDiaModal">
            <div class="compromissos-dia-content">
                <button class="btn-fechar" onclick="fecharModalCompromissos()">&times;</button>
                <h3 id="modalDiaTitulo"></h3>
                <div id="modalDiaCompromissos">
                    <!-- Compromissos do dia serão inseridos aqui -->
                </div>
            </div>
        </div>

        <!-- Modal para edição de cliente -->
        <div class="compromissos-dia-modal" id="clienteModal">
            <div class="compromissos-dia-content">
                <button class="btn-fechar" onclick="fecharModalCliente()">&times;</button>
                <h3 id="modalClienteTitulo">Editar Cliente</h3>
                <div id="modalClienteContent">
                    <!-- Formulário de edição será inserido aqui -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Armazenamento local dos compromissos e notas
        let compromissos = JSON.parse(localStorage.getItem('compromissos')) || [];
        let compromissosPassados = JSON.parse(localStorage.getItem('compromissosPassados')) || [];
        let notas = JSON.parse(localStorage.getItem('notas')) || [];
        let clientes = JSON.parse(localStorage.getItem('clientes')) || [];

        // Função para salvar dados
        function salvarDados() {
            localStorage.setItem('compromissos', JSON.stringify(compromissos));
            localStorage.setItem('compromissosPassados', JSON.stringify(compromissosPassados));
            localStorage.setItem('notas', JSON.stringify(notas));
            localStorage.setItem('clientes', JSON.stringify(clientes));
        }

        // Função para mudar de seção
        function mudarSeccao(seccao) {
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            event.currentTarget.classList.add('active');

            document.getElementById('agenda-section').style.display = seccao === 'agenda' ? 'block' : 'none';
            document.getElementById('notas-section').style.display = seccao === 'notas' ? 'block' : 'none';
            document.getElementById('cadastro-section').style.display = seccao === 'cadastro' ? 'block' : 'none';
            document.getElementById('configuracoes-section').style.display = seccao === 'configuracoes' ? 'block' : 'none';
        }

        // Função para verificar compromissos passados
        function verificarCompromissosPassados() {
            const agora = new Date();
            let movidos = 0;

            compromissos = compromissos.filter(compromisso => {
                const dataCompromisso = new Date(compromisso.data);
                if (dataCompromisso <= agora) {
                    compromissosPassados.push(compromisso);
                    movidos++;
                    return false;
                }
                return true;
            });

            if (movidos > 0) {
                salvarDados();
                atualizarStatus(`${movidos} compromisso(s) movido(s) para a aba de passados.`);
                renderizarCompromissos();
            }
        }

        // Função para atualizar status
        function atualizarStatus(mensagem) {
            const status = document.getElementById('status');
            status.textContent = mensagem;
            setTimeout(() => {
                status.textContent = '';
            }, 3000);
        }

        // Função para mudar de aba
        function mudarAba(aba) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(aba).classList.add('active');
        }

        // Função para renderizar compromissos
        function renderizarCompromissos() {
            renderizarMeses();
        }

        // Função para renderizar notas
        function renderizarNotas() {
            const listaNotas = document.getElementById('listaNotas');
            listaNotas.innerHTML = '';
            
            notas.sort((a, b) => new Date(b.data) - new Date(a.data));
            
            notas.forEach((nota, index) => {
                const div = document.createElement('div');
                div.className = 'nota-card';
                div.innerHTML = `
                    <h3>${nota.titulo}</h3>
                    <div class="preview">${nota.conteudo}</div>
                    <p class="data">Criado em: ${new Date(nota.data).toLocaleString('pt-BR')}</p>
                `;
                div.onclick = () => abrirModalNota(index);
                listaNotas.appendChild(div);
            });
        }

        let notaAtual = -1;

        // Função para abrir o modal da nota
        function abrirModalNota(index) {
            notaAtual = index;
            const nota = notas[index];
            const modal = document.getElementById('notaModal');
            const modalTitulo = document.getElementById('modalTitulo');
            const modalConteudo = document.getElementById('modalConteudo');
            const modalData = document.getElementById('modalData');

            modalTitulo.textContent = nota.titulo;
            modalConteudo.textContent = nota.conteudo;
            modalData.textContent = `Criado em: ${new Date(nota.data).toLocaleString('pt-BR')}`;
            modal.classList.add('active');
        }

        // Função para fechar o modal
        function fecharModal() {
            const modal = document.getElementById('notaModal');
            modal.classList.remove('active');
            notaAtual = -1;
        }

        // Função para excluir a nota atual
        function excluirNotaAtual() {
            if (notaAtual !== -1) {
                if (confirm('Tem certeza que deseja excluir esta nota?')) {
                    notas.splice(notaAtual, 1);
                    salvarDados();
                    renderizarNotas();
                    fecharModal();
                    atualizarStatus('Nota excluída com sucesso!');
                }
            }
        }

        // Fechar modal ao clicar fora dele
        document.getElementById('notaModal').addEventListener('click', function(e) {
            if (e.target === this) {
                fecharModal();
            }
        });

        // Fechar modal com a tecla ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                fecharModal();
            }
        });

        // Função para adicionar compromisso
        document.getElementById('formCompromisso').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const titulo = document.getElementById('titulo').value;
            const data = document.getElementById('data').value;
            const descricao = document.getElementById('descricao').value;
            
            compromissos.push({ titulo, data, descricao });
            salvarDados();
            
            // Verificar se estamos na visualização dos dias ou dos meses
            const diasView = document.getElementById('dias-view');
            if (diasView.style.display === 'grid') {
                const voltarBtn = document.querySelector('.voltar-btn');
                if (voltarBtn) {
                    const mesIndex = parseInt(voltarBtn.getAttribute('data-mes'));
                    mostrarDiasDoMes(mesIndex);
                }
            } else {
                renderizarMeses();
            }
            
            this.reset();
            atualizarStatus('Compromisso adicionado com sucesso!');
        });

        // Função para adicionar nota
        document.getElementById('formNota').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const titulo = document.getElementById('tituloNota').value;
            const conteudo = document.getElementById('conteudoNota').value;
            const data = new Date().toISOString();
            
            notas.push({ titulo, conteudo, data });
            salvarDados();
            renderizarNotas();
            
            this.reset();
            atualizarStatus('Nota adicionada com sucesso!');
        });

        // Função para mostrar compromissos do dia
        function mostrarCompromissosDoDia(dia, mes, ano) {
            const modal = document.getElementById('compromissosDiaModal');
            const modalTitulo = document.getElementById('modalDiaTitulo');
            const modalCompromissos = document.getElementById('modalDiaCompromissos');
            const meses = ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 
                          'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];

            modalTitulo.textContent = `${dia} de ${meses[mes]} de ${ano}`;
            modalCompromissos.innerHTML = '';

            // Filtrar compromissos ativos do dia
            const compromissosDoDia = compromissos.filter(comp => {
                const dataComp = new Date(comp.data);
                return dataComp.getDate() === dia && 
                       dataComp.getMonth() === mes && 
                       dataComp.getFullYear() === ano;
            });

            // Filtrar compromissos passados do dia
            const compromissosPassadosDoDia = compromissosPassados.filter(comp => {
                const dataComp = new Date(comp.data);
                return dataComp.getDate() === dia && 
                       dataComp.getMonth() === mes && 
                       dataComp.getFullYear() === ano;
            });

            if (compromissosDoDia.length === 0 && compromissosPassadosDoDia.length === 0) {
                modalCompromissos.innerHTML = '<p>Nenhum compromisso para este dia.</p>';
            } else {
                // Renderizar compromissos ativos
                if (compromissosDoDia.length > 0) {
                    const compromissosAtivosDiv = document.createElement('div');
                    compromissosAtivosDiv.innerHTML = '<h4 style="color: #64b5f6; margin: 20px 0 10px;">Compromissos Ativos</h4>';
                    compromissosDoDia.forEach((compromisso, index) => {
                        const div = document.createElement('div');
                        div.className = 'compromisso';
                        div.setAttribute('data-index', compromissos.indexOf(compromisso));
                        div.innerHTML = `
                            <h3>${compromisso.titulo}</h3>
                            <p>Horário: ${new Date(compromisso.data).toLocaleTimeString('pt-BR')}</p>
                            <p>${compromisso.descricao}</p>
                            <div class="acoes">
                                <button class="btn-editar" onclick="editarCompromisso(${compromissos.indexOf(compromisso)})">Editar</button>
                                <button class="btn-excluir" onclick="excluirCompromisso(${compromissos.indexOf(compromisso)})">Excluir</button>
                            </div>
                        `;
                        compromissosAtivosDiv.appendChild(div);
                    });
                    modalCompromissos.appendChild(compromissosAtivosDiv);
                }

                // Renderizar compromissos passados
                if (compromissosPassadosDoDia.length > 0) {
                    const compromissosPassadosDiv = document.createElement('div');
                    compromissosPassadosDiv.innerHTML = '<h4 style="color: #ef5350; margin: 20px 0 10px;">Compromissos Passados</h4>';
                    compromissosPassadosDoDia.forEach((compromisso, index) => {
                        const div = document.createElement('div');
                        div.className = 'compromisso passado';
                        div.innerHTML = `
                            <h3>${compromisso.titulo}</h3>
                            <p>Horário: ${new Date(compromisso.data).toLocaleTimeString('pt-BR')}</p>
                            <p>${compromisso.descricao}</p>
                            <div class="acoes">
                                <button class="btn-excluir" onclick="excluirCompromissoPassado(${compromissosPassados.indexOf(compromisso)})">Excluir</button>
                            </div>
                        `;
                        compromissosPassadosDiv.appendChild(div);
                    });
                    modalCompromissos.appendChild(compromissosPassadosDiv);
                }
            }

            modal.classList.add('active');
        }

        // Função para editar compromisso
        function editarCompromisso(index) {
            const compromisso = compromissos[index];
            const modal = document.getElementById('compromissosDiaModal');
            const modalCompromissos = document.getElementById('modalDiaCompromissos');
            
            // Criar formulário de edição
            const formEdicao = document.createElement('div');
            formEdicao.className = 'compromisso';
            formEdicao.innerHTML = `
                <h3>Editar Compromisso</h3>
                <div class="form-group">
                    <label for="editTitulo">Título:</label>
                    <input type="text" id="editTitulo" value="${compromisso.titulo}" required>
                </div>
                <div class="form-group">
                    <label for="editData">Data:</label>
                    <input type="datetime-local" id="editData" value="${compromisso.data}" required>
                </div>
                <div class="form-group">
                    <label for="editDescricao">Descrição:</label>
                    <textarea id="editDescricao" rows="3">${compromisso.descricao}</textarea>
                </div>
                <div class="acoes">
                    <button onclick="salvarEdicao(${index})">Salvar</button>
                    <button class="btn-excluir" onclick="cancelarEdicao()">Cancelar</button>
                </div>
            `;
            
            // Substituir o card do compromisso pelo formulário
            const compromissoCard = modalCompromissos.querySelector(`.compromisso[data-index="${index}"]`);
            if (compromissoCard) {
                compromissoCard.parentNode.replaceChild(formEdicao, compromissoCard);
            }
        }

        // Função para salvar edição
        function salvarEdicao(index) {
            const titulo = document.getElementById('editTitulo').value;
            const data = document.getElementById('editData').value;
            const descricao = document.getElementById('editDescricao').value;
            
            compromissos[index] = { titulo, data, descricao };
            salvarDados();
            
            // Atualizar a visualização dos compromissos do dia
            const modalTitulo = document.getElementById('modalDiaTitulo');
            const [dia, mes, ano] = modalTitulo.textContent.split(' de ');
            const mesIndex = ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 
                              'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'].indexOf(mes);
            
            mostrarCompromissosDoDia(parseInt(dia), mesIndex, parseInt(ano));
            atualizarStatus('Compromisso atualizado com sucesso!');
        }

        // Função para cancelar edição
        function cancelarEdicao() {
            const modalTitulo = document.getElementById('modalDiaTitulo');
            const [dia, mes, ano] = modalTitulo.textContent.split(' de ');
            const mesIndex = ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 
                              'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'].indexOf(mes);
            
            mostrarCompromissosDoDia(parseInt(dia), mesIndex, parseInt(ano));
        }

        // Função para excluir compromisso pendente
        function excluirCompromisso(index) {
            if (confirm('Tem certeza que deseja excluir este compromisso?')) {
                compromissos.splice(index, 1);
                salvarDados();
                atualizarStatus('Compromisso excluído com sucesso!');
                fecharModalCompromissos();
                
                // Obter o mês atual sendo visualizado
                const diasView = document.getElementById('dias-view');
                if (diasView.style.display === 'grid') {
                    const voltarBtn = document.querySelector('.voltar-btn');
                    if (voltarBtn) {
                        const mesIndex = parseInt(voltarBtn.getAttribute('data-mes'));
                        mostrarDiasDoMes(mesIndex);
                    }
                } else {
                    renderizarMeses();
                }
            }
        }

        // Função para excluir compromisso passado
        function excluirCompromissoPassado(index) {
            if (confirm('Tem certeza que deseja excluir este compromisso passado?')) {
                compromissosPassados.splice(index, 1);
                salvarDados();
                atualizarStatus('Compromisso passado excluído com sucesso!');
                fecharModalCompromissos();
                
                // Obter o mês atual sendo visualizado
                const diasView = document.getElementById('dias-view');
                if (diasView.style.display === 'grid') {
                    const voltarBtn = document.querySelector('.voltar-btn');
                    if (voltarBtn) {
                        const mesIndex = parseInt(voltarBtn.getAttribute('data-mes'));
                        mostrarDiasDoMes(mesIndex);
                    }
                } else {
                    renderizarMeses();
                }
            }
        }

        // Verificar compromissos passados a cada 30 segundos
        setInterval(verificarCompromissosPassados, 30000);

        // Verificar compromissos passados ao carregar a página
        verificarCompromissosPassados();

        // Renderizar compromissos e notas iniciais
        renderizarCompromissos();
        renderizarNotas();

        // Função para renderizar meses
        function renderizarMeses() {
            const mesesView = document.getElementById('meses-view');
            const diasView = document.getElementById('dias-view');
            const anoSelecionado = document.getElementById('anoSelecionado').value;
            
            if (!anoSelecionado) {
                mesesView.style.display = 'none';
                return;
            }

            mesesView.innerHTML = '';
            mesesView.style.display = 'grid';
            diasView.style.display = 'none';

            // Remover botões voltar existentes
            const botoesVoltar = document.querySelectorAll('.voltar-btn');
            botoesVoltar.forEach(botao => botao.remove());

            const meses = ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 
                          'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];
            
            const agora = new Date();
            const mesAtual = agora.getMonth();
            const anoAtual = agora.getFullYear();

            meses.forEach((mes, index) => {
                const div = document.createElement('div');
                div.className = 'mes-card';
                
                // Verificar se existem compromissos ativos neste mês
                const temCompromissosAtivos = compromissos.some(comp => {
                    const dataComp = new Date(comp.data);
                    return dataComp.getMonth() === index && 
                           dataComp.getFullYear() === parseInt(anoSelecionado);
                });

                // Verificar se existem compromissos passados neste mês
                const temCompromissosPassados = compromissosPassados.some(comp => {
                    const dataComp = new Date(comp.data);
                    return dataComp.getMonth() === index && 
                           dataComp.getFullYear() === parseInt(anoSelecionado);
                });

                // Verificar se o mês já passou
                const mesPassado = parseInt(anoSelecionado) < anoAtual || 
                                  (parseInt(anoSelecionado) === anoAtual && index < mesAtual);

                if (temCompromissosAtivos) {
                    div.classList.add('tem-compromissos');
                } else if (temCompromissosPassados) {
                    div.classList.add('passado');
                }

                div.innerHTML = `
                    <div class="indicador">${temCompromissosAtivos ? '!' : ''}</div>
                    <h3>${mes} de ${anoSelecionado}</h3>
                    <div class="compromissos-count">
                        ${temCompromissosAtivos ? 'Possui compromissos ativos' : 
                          temCompromissosPassados ? 'Possui compromissos passados' : 
                          'Sem compromissos'}
                    </div>
                `;

                div.onclick = () => mostrarDiasDoMes(index, parseInt(anoSelecionado));
                mesesView.appendChild(div);
            });
        }

        // Função para mostrar dias do mês
        function mostrarDiasDoMes(mesIndex, ano) {
            const mesesView = document.getElementById('meses-view');
            const diasView = document.getElementById('dias-view');
            const diasGrid = document.getElementById('dias-grid');
            const mesAtualTitulo = document.getElementById('mes-atual-titulo');
            mesesView.style.display = 'none';
            diasView.style.display = 'block';

            // Remover botões voltar existentes
            const botoesVoltar = document.querySelectorAll('.voltar-btn');
            botoesVoltar.forEach(botao => botao.remove());

            const meses = ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 
                          'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];
            
            // Atualizar o título do mês atual
            mesAtualTitulo.textContent = `${meses[mesIndex]} de ${ano}`;
            
            const agora = new Date();
            const diaAtual = agora.getDate();
            const mesAtual = agora.getMonth();
            const diasNoMes = new Date(ano, mesIndex + 1, 0).getDate();
            const primeiroDia = new Date(ano, mesIndex, 1).getDay();
            diasGrid.innerHTML = '';

            // Adicionar botão voltar
            const voltarBtn = document.createElement('button');
            voltarBtn.className = 'voltar-btn';
            voltarBtn.innerHTML = '<i class="fas fa-arrow-left"></i> Voltar';
            voltarBtn.onclick = () => {
                voltarBtn.remove();
                mesesView.style.display = 'grid';
                diasView.style.display = 'none';
            };
            diasView.parentElement.insertBefore(voltarBtn, diasView);

            // Adicionar espaços vazios para os dias antes do primeiro dia do mês
            for (let i = 0; i < primeiroDia; i++) {
                const divVazia = document.createElement('div');
                divVazia.className = 'dia-card vazio';
                diasGrid.appendChild(divVazia);
            }

            // Adicionar os dias do mês
            for (let dia = 1; dia <= diasNoMes; dia++) {
                const div = document.createElement('div');
                div.className = 'dia-card';
                
                // Verificar se existem compromissos ativos neste dia
                const temCompromissosAtivos = compromissos.some(comp => {
                    const dataComp = new Date(comp.data);
                    return dataComp.getDate() === dia && 
                           dataComp.getMonth() === mesIndex && 
                           dataComp.getFullYear() === ano;
                });

                // Verificar se existem compromissos passados neste dia
                const temCompromissosPassados = compromissosPassados.some(comp => {
                    const dataComp = new Date(comp.data);
                    return dataComp.getDate() === dia && 
                           dataComp.getMonth() === mesIndex && 
                           dataComp.getFullYear() === ano;
                });

                if (temCompromissosAtivos) {
                    div.classList.add('tem-compromissos');
                } else if (temCompromissosPassados) {
                    div.classList.add('passado');
                }

                div.innerHTML = `
                    <div class="indicador">${temCompromissosAtivos ? '!' : ''}</div>
                    <h4>${dia}</h4>
                    <div class="compromissos-count">
                        ${temCompromissosAtivos ? 'Possui compromissos ativos' : 
                          temCompromissosPassados ? 'Possui compromissos passados' : 
                          'Sem compromissos'}
                    </div>
                `;

                div.onclick = () => mostrarCompromissosDoDia(dia, mesIndex, ano);
                diasGrid.appendChild(div);
            }
        }

        // Adicionar evento para mudança do ano
        document.getElementById('anoSelecionado').addEventListener('change', renderizarMeses);

        // Função para fechar modal de compromissos
        function fecharModalCompromissos() {
            const modal = document.getElementById('compromissosDiaModal');
            modal.classList.remove('active');
        }

        // Fechar modal de compromissos ao clicar fora
        document.getElementById('compromissosDiaModal').addEventListener('click', function(e) {
            if (e.target === this) {
                fecharModalCompromissos();
            }
        });

        // Fechar modal de compromissos com ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                fecharModalCompromissos();
            }
        });

        // Inicializar a visualização dos meses
        renderizarMeses();

        // Função para renderizar clientes
        function renderizarClientes() {
            const listaClientes = document.getElementById('listaClientes');
            listaClientes.innerHTML = '';
            
            clientes.sort((a, b) => a.nome.localeCompare(b.nome));
            
            clientes.forEach((cliente, index) => {
                const div = document.createElement('div');
                div.className = 'cliente-card';
                div.innerHTML = `
                    <h3>Nome: ${cliente.nome}</h3>
                    <p>Contato: ${cliente.contato}</p>
                    <div class="sessoes-preview">Sessões: ${cliente.sessoes}</div>
                    <div class="acoes">
                        <button class="btn-editar" onclick="editarCliente(${index})">Editar</button>
                        <button class="btn-excluir" onclick="excluirCliente(${index})">Excluir</button>
                    </div>
                `;
                listaClientes.appendChild(div);
            });
        }

        // Função para editar cliente
        function editarCliente(index) {
            const cliente = clientes[index];
            const modal = document.getElementById('clienteModal');
            const modalContent = document.getElementById('modalClienteContent');
            
            // Criar formulário de edição
            const formEdicao = document.createElement('div');
            formEdicao.className = 'compromisso';
            formEdicao.innerHTML = `
                <div class="form-group">
                    <label for="editNomeCliente">Nome:</label>
                    <input type="text" id="editNomeCliente" value="${cliente.nome}" required>
                </div>
                <div class="form-group">
                    <label for="editContatoCliente">Contato:</label>
                    <input type="text" id="editContatoCliente" value="${cliente.contato}" required>
                </div>
                <div class="form-group">
                    <label for="editSessoesCliente">Sessões:</label>
                    <textarea id="editSessoesCliente" rows="3">${cliente.sessoes}</textarea>
                </div>
                <div class="acoes">
                    <button onclick="salvarEdicaoCliente(${index})">Salvar</button>
                    <button class="btn-excluir" onclick="fecharModalCliente()">Cancelar</button>
                </div>
            `;
            
            modalContent.innerHTML = '';
            modalContent.appendChild(formEdicao);
            modal.classList.add('active');
        }

        // Função para salvar edição do cliente
        function salvarEdicaoCliente(index) {
            const nome = document.getElementById('editNomeCliente').value;
            const contato = document.getElementById('editContatoCliente').value;
            const sessoes = document.getElementById('editSessoesCliente').value;
            
            clientes[index] = { nome, contato, sessoes };
            salvarDados();
            renderizarClientes();
            fecharModalCliente();
            atualizarStatus('Cliente atualizado com sucesso!');
        }

        // Função para fechar modal de cliente
        function fecharModalCliente() {
            const modal = document.getElementById('clienteModal');
            modal.classList.remove('active');
        }

        // Fechar modal de cliente ao clicar fora
        document.getElementById('clienteModal').addEventListener('click', function(e) {
            if (e.target === this) {
                fecharModalCliente();
            }
        });

        // Fechar modal de cliente com ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                fecharModalCliente();
                fecharModalConfirmacao();
            }
        });

        // Fechar modal de confirmação ao clicar fora
        document.getElementById('modalConfirmacao').addEventListener('click', function(e) {
            if (e.target === this) {
                fecharModalConfirmacao();
            }
        });

        // Adicionar evento para o formulário de cliente
        document.getElementById('formCliente').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const nome = document.getElementById('nomeCliente').value;
            const contato = document.getElementById('contatoCliente').value;
            const sessoes = document.getElementById('sessoesCliente').value;
            
            clientes.push({ nome, contato, sessoes });
            salvarDados();
            renderizarClientes();
            
            this.reset();
            atualizarStatus('Cliente adicionado com sucesso!');
        });

        // Renderizar clientes iniciais
        renderizarClientes();

        // Função para filtrar compromissos
        function filtrarCompromissos(termo) {
            const compromissosFiltrados = compromissos.filter(comp => 
                comp.titulo.toLowerCase().includes(termo.toLowerCase()) ||
                comp.descricao.toLowerCase().includes(termo.toLowerCase())
            );
            
            const compromissosPassadosFiltrados = compromissosPassados.filter(comp => 
                comp.titulo.toLowerCase().includes(termo.toLowerCase()) ||
                comp.descricao.toLowerCase().includes(termo.toLowerCase())
            );

            return { compromissosFiltrados, compromissosPassadosFiltrados };
        }

        // Função para filtrar notas
        function filtrarNotas(termo) {
            if (!termo.trim()) {
                return notas;
            }
            return notas.filter(nota => 
                nota.titulo.toLowerCase().includes(termo.toLowerCase()) ||
                nota.conteudo.toLowerCase().includes(termo.toLowerCase())
            );
        }

        // Função para filtrar clientes
        function filtrarClientes(termo) {
            if (!termo.trim()) {
                return clientes;
            }
            return clientes.filter(cliente => 
                cliente.nome.toLowerCase().includes(termo.toLowerCase()) ||
                cliente.contato.toLowerCase().includes(termo.toLowerCase()) ||
                cliente.sessoes.toLowerCase().includes(termo.toLowerCase())
            );
        }

        // Função para renderizar resultados da busca
        function renderizarResultadosBusca(compromissosAtivos, compromissosPassados) {
            const resultadosBusca = document.getElementById('resultados-busca');
            const compromissosBusca = document.getElementById('compromissos-busca');
            compromissosBusca.innerHTML = '';

            if (compromissosAtivos.length === 0 && compromissosPassados.length === 0) {
                resultadosBusca.style.display = 'none';
                return;
            }

            resultadosBusca.style.display = 'block';

            // Renderizar compromissos ativos
            if (compromissosAtivos.length > 0) {
                const compromissosAtivosDiv = document.createElement('div');
                compromissosAtivosDiv.innerHTML = '<h4 style="color: #64b5f6; margin: 20px 0 10px;">Compromissos Ativos</h4>';
                
                compromissosAtivos.forEach((compromisso, index) => {
                    const div = document.createElement('div');
                    div.className = 'compromisso-busca-card';
                    div.innerHTML = `
                        <h4>${compromisso.titulo}</h4>
                        <p class="data">Data: ${new Date(compromisso.data).toLocaleString('pt-BR')}</p>
                        <p>${compromisso.descricao}</p>
                        <div class="acoes">
                            <button class="btn-editar" onclick="editarCompromisso(${compromissos.indexOf(compromisso)})">Editar</button>
                            <button class="btn-excluir" onclick="excluirCompromisso(${compromissos.indexOf(compromisso)})">Excluir</button>
                        </div>
                    `;
                    compromissosAtivosDiv.appendChild(div);
                });
                compromissosBusca.appendChild(compromissosAtivosDiv);
            }

            // Renderizar compromissos passados
            if (compromissosPassados.length > 0) {
                const compromissosPassadosDiv = document.createElement('div');
                compromissosPassadosDiv.innerHTML = '<h4 style="color: #ef5350; margin: 20px 0 10px;">Compromissos Passados</h4>';
                
                compromissosPassados.forEach((compromisso, index) => {
                    const div = document.createElement('div');
                    div.className = 'compromisso-busca-card';
                    div.style.borderLeftColor = '#ef5350';
                    div.innerHTML = `
                        <h4 style="color: #ef5350;">${compromisso.titulo}</h4>
                        <p class="data">Data: ${new Date(compromisso.data).toLocaleString('pt-BR')}</p>
                        <p>${compromisso.descricao}</p>
                        <div class="acoes">
                            <button class="btn-excluir" onclick="excluirCompromissoPassado(${compromissosPassados.indexOf(compromisso)})">Excluir</button>
                        </div>
                    `;
                    compromissosPassadosDiv.appendChild(div);
                });
                compromissosBusca.appendChild(compromissosPassadosDiv);
            }
        }

        // Adicionar eventos de busca
        document.getElementById('searchAgenda').addEventListener('input', function(e) {
            const termo = e.target.value;
            if (termo.trim() === '') {
                document.getElementById('resultados-busca').style.display = 'none';
                renderizarMeses();
                return;
            }

            const { compromissosFiltrados, compromissosPassadosFiltrados } = filtrarCompromissos(termo);
            renderizarResultadosBusca(compromissosFiltrados, compromissosPassadosFiltrados);
        });

        document.getElementById('searchNotas').addEventListener('input', function(e) {
            const termo = e.target.value;
            const notasFiltradas = filtrarNotas(termo);
            
            // Atualizar a visualização com as notas filtradas
            const listaNotas = document.getElementById('listaNotas');
            listaNotas.innerHTML = '';
            
            notasFiltradas.forEach((nota, index) => {
                const div = document.createElement('div');
                div.className = 'nota-card';
                div.innerHTML = `
                    <h3>${nota.titulo}</h3>
                    <div class="preview">${nota.conteudo}</div>
                    <p class="data">Criado em: ${new Date(nota.data).toLocaleString('pt-BR')}</p>
                `;
                div.onclick = () => abrirModalNota(notas.indexOf(nota));
                listaNotas.appendChild(div);
            });
        });

        document.getElementById('searchClientes').addEventListener('input', function(e) {
            const termo = e.target.value;
            const clientesFiltrados = filtrarClientes(termo);
            
            // Atualizar a visualização com os clientes filtrados
            const listaClientes = document.getElementById('listaClientes');
            listaClientes.innerHTML = '';
            
            clientesFiltrados.forEach((cliente, index) => {
                const div = document.createElement('div');
                div.className = 'cliente-card';
                div.innerHTML = `
                    <h3>Nome: ${cliente.nome}</h3>
                    <p>Contato: ${cliente.contato}</p>
                    <div class="sessoes-preview">Sessões: ${cliente.sessoes}</div>
                    <div class="acoes">
                        <button class="btn-editar" onclick="editarCliente(${clientes.indexOf(cliente)})">Editar</button>
                        <button class="btn-excluir" onclick="excluirCliente(${clientes.indexOf(cliente)})">Excluir</button>
                    </div>
                `;
                listaClientes.appendChild(div);
            });
        });

        // Função para excluir cliente
        function excluirCliente(index) {
            if (confirm('Tem certeza que deseja excluir este cliente?')) {
                clientes.splice(index, 1);
                salvarDados();
                renderizarClientes();
                atualizarStatus('Cliente excluído com sucesso!');
            }
        }

        // Registrar o Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('ServiceWorker registrado com sucesso:', registration.scope);
                    })
                    .catch(error => {
                        console.log('Falha ao registrar o ServiceWorker:', error);
                    });
            });
        }

        // Função para confirmar limpar dados
        function confirmarLimparDados() {
            const modal = document.getElementById('modalConfirmacao');
            modal.classList.add('active');
        }

        // Função para limpar dados
        function limparDados() {
            compromissos = [];
            compromissosPassados = [];
            notas = [];
            clientes = [];
            salvarDados();
            renderizarCompromissos();
            renderizarNotas();
            renderizarClientes();
            atualizarStatus('Todos os dados foram limpos com sucesso!');
            fecharModalConfirmacao();
        }

        // Função para fechar modal de confirmação
        function fecharModalConfirmacao() {
            const modal = document.getElementById('modalConfirmacao');
            modal.classList.remove('active');
        }
    </script>
</body>
</html> 